<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>è„³ãƒˆãƒ¬ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 18px; /* å…¨ä½“ã®æ–‡å­—ã‚’å°‘ã—å¤§ãã */
    }
    body {
      margin: 0;
      background: #0f172a;
      color: #f9fafb;
      display: flex;
      justify-content: center;
    }
    .container {
      max-width: 980px;
      width: 100%;
      padding: 16px;
    }
    header {
      text-align: center;
      margin-bottom: 12px;
    }
    header h1 {
      margin: 0 0 4px;
      font-size: 2rem;
    }
    header p {
      margin: 0;
      font-size: 1rem;
      color: #cbd5f5;
    }
    .top-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-bottom: 12px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      cursor: pointer;
      font-size: 1rem;
      background: #1d4ed8;
      color: #f9fafb;
      transition: transform 0.07s ease, box-shadow 0.07s ease, background 0.15s;
      box-shadow: 0 2px 4px rgba(15,23,42,0.4);
    }
    button:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(15,23,42,0.6);
      background: #2563eb;
    }
    button:active:not(:disabled) {
      transform: translateY(0);
      box-shadow: 0 1px 2px rgba(15,23,42,0.8);
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }
    .btn-secondary {
      background: #64748b;
    }
    .btn-secondary:hover:not(:disabled) {
      background: #94a3b8;
    }

    main {
      background: rgba(15,23,42,0.85);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      border: 1px solid rgba(148,163,184,0.3);
    }
    .screen {
      display: none;
    }
    .screen.active {
      display: block;
    }
    h2 {
      margin-top: 0;
      font-size: 1.6rem;
    }
    h3 {
      margin-top: 1.2rem;
      font-size: 1.2rem;
    }
    .game-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }
    .game-card {
      background: #020617;
      border-radius: 14px;
      padding: 14px;
      border: 1px solid rgba(148,163,184,0.3);
    }
    .game-card h3 {
      margin-top: 0;
    }
    .tag {
      display: inline-block;
      font-size: 0.8rem;
      padding: 3px 10px;
      border-radius: 999px;
      background: rgba(59,130,246,0.15);
      color: #bfdbfe;
      margin-bottom: 4px;
    }
    .muted {
      color: #94a3b8;
      font-size: 0.95rem;
    }
    .home-btn {
      margin-top: 10px;
      background: #0f766e;
    }
    .ranking-list {
      padding-left: 20px;
      font-size: 0.95rem;
      max-height: 180px;
      overflow-y: auto;
    }
    .ranking-list li {
      margin-bottom: 2px;
    }
    .status-row {
      display: flex;
      justify-content: space-between;
      font-size: 1rem;
      margin-bottom: 6px;
    }
    input[type="number"],
    input[type="text"] {
      width: 100%;
      padding: 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      background: #020617;
      color: #e5e7eb;
      font-size: 1rem;
      box-sizing: border-box;
      margin: 6px 0;
    }
    input:disabled {
      opacity: 0.6;
    }
    .button-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }
    .emphasis {
      font-weight: 600;
      color: #fbbf24;
    }
    /* Reaction game */
    #reaction-box {
      text-align: center;
      padding: 16px;
      border-radius: 12px;
      background: #111827;
      transition: background 0.2s;
      font-size: 1.1rem;
    }
    #reaction-box.go {
      background: #15803d;
    }
    #reaction-message {
      margin-bottom: 8px;
    }
    #reaction-result {
      margin-top: 8px;
      font-size: 1.1rem;
    }
    /* Memory game */
    #memory-board {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin: 8px 0 10px;
    }
    .memory-tile {
      height: 90px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      opacity: 0.8;
      transition: transform 0.08s, opacity 0.08s, box-shadow 0.08s;
    }
    .memory-tile.active {
      transform: scale(1.05);
      opacity: 1;
      box-shadow: 0 0 12px rgba(250,250,250,0.7);
    }
    .memory-tile[data-index="0"] { background: #ef4444; }
    .memory-tile[data-index="1"] { background: #22c55e; }
    .memory-tile[data-index="2"] { background: #3b82f6; }
    .memory-tile[data-index="3"] { background: #eab308; }
    #memory-level {
      font-weight: 600;
    }

    /* å…±é€šï¼šå¤§ãã‚ãƒœã‚¿ãƒ³ç”¨ */
    .big-option-btn {
      flex: 1;
      min-width: 120px;
      font-size: 1.1rem;
      padding: 12px 10px;
    }

    /* 1ã€œ25ç”¨ãƒœãƒ¼ãƒ‰ */
    #tap25-board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin-top: 8px;
    }
    .tap25-cell {
      height: 70px;
      font-size: 1.3rem;
      border-radius: 10px;
      border: none;
      background: #1f2937;
      color: #e5e7eb;
      cursor: pointer;
      transition: background 0.1s, transform 0.1s;
    }
    .tap25-cell.done {
      background: #16a34a;
      transform: scale(0.95);
    }

    /* ã‚¹ãƒˆãƒ«ãƒ¼ãƒ—æ–‡å­— */
    #stroop-word {
      font-size: 2rem;
      font-weight: 700;
      margin: 10px 0;
      text-align: center;
    }

    /* çŸ¢å°ãƒœã‚¿ãƒ³ */
    .arrow-btn {
      font-size: 1.6rem;
      padding: 12px 14px;
      flex: 1;
      min-width: 90px;
    }

    @media (max-width: 640px) {
      main { padding: 12px; }
      header h1 { font-size: 1.7rem; }
      :root { font-size: 17px; }
      .tap25-cell { height: 60px; font-size: 1.15rem; }
      .memory-tile { height: 80px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>è„³ãƒˆãƒ¬ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ ğŸ§ ğŸ‰</h1>
      <p>é«˜é½¢è€…ãƒ»å­ã©ã‚‚å‘ã‘ã€‚å¤§ããªæ–‡å­—ã§ã€åå°„ãƒ»è¨ˆç®—ãƒ»è¨˜æ†¶ãƒ»åˆ¤æ–­ã‚’ã¾ã‚‹ã”ã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼</p>
    </header>

    <nav class="top-nav">
      <button data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ </button>
      <button data-target="screen-reaction">âš¡ åå°„</button>
      <button data-target="screen-calc">â— è¨ˆç®—</button>
      <button data-target="screen-memory">ğŸ§© è¨˜æ†¶</button>
      <button data-target="screen-stroop">ğŸ¨ è‰²ã“ã¨ã°</button>
      <button data-target="screen-tap25">ğŸ”¢ 1ã€œ25</button>
      <button data-target="screen-group">ğŸ§º ä»²é–“åˆ†ã‘</button>
      <button data-target="screen-reverse">ğŸ” é€†é †æ•°å­—</button>
      <button data-target="screen-nback">ğŸ” 1ã¤å‰</button>
      <button data-target="screen-flash">â• ãƒ•ãƒ©ãƒƒã‚·ãƒ¥</button>
      <button data-target="screen-arrows">ğŸ”¼ çŸ¢å°è¨˜æ†¶</button>
      <button data-target="screen-words">âœï¸ ã“ã¨ã°</button>
    </nav>

    <main>
      <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
      <section id="screen-home" class="screen active">
        <h2>ã‚²ãƒ¼ãƒ ã‚’ãˆã‚‰ã‚“ã§ã‚¹ã‚¿ãƒ¼ãƒˆï¼</h2>
        <p class="muted">
          ãã‚Œãã‚Œã®ã‚²ãƒ¼ãƒ ã®çµæœã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚<br />
          ä½•å›ã‹ãƒ—ãƒ¬ã‚¤ã—ã¦<strong>æ°—ã«å…¥ã£ãŸçµæœãŒå‡ºãŸã‚‰ã€å„ã‚²ãƒ¼ãƒ ç”»é¢ã®ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ç™»éŒ²</strong>ã§ãã¾ã™ã€‚
        </p>
        <div class="game-grid">
          <div class="game-card">
            <span class="tag">åå°„</span>
            <h3>âš¡ åå°„ç¥çµŒã‚²ãƒ¼ãƒ </h3>
            <p class="muted">ã€Œä»Šã ï¼ã€ã®ç¬é–“ã«ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã‚²ãƒ¼ãƒ ã€‚</p>
            <button data-target="screen-reaction">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">è¨ˆç®—</span>
            <h3>â— è¨ˆç®—ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h3>
            <p class="muted">30ç§’ã§ä½•å•ã¨ã‘ã‚‹ã‹ï¼Ÿ</p>
            <button data-target="screen-calc">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">è¨˜æ†¶</span>
            <h3>ğŸ§© è‰²ãƒã‚¹è¨˜æ†¶</h3>
            <p class="muted">å…‰ã‚‹ãƒã‚¹ã®é †ç•ªã‚’è¦šãˆã¦ã‚¿ãƒƒãƒ—ã€‚</p>
            <button data-target="screen-memory">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">æ³¨æ„ãƒ»åˆ¤æ–­</span>
            <h3>ğŸ¨ è‰²ã“ã¨ã°</h3>
            <p class="muted">æ–‡å­—ã®ã€Œã„ã‚ã€ã¨ã€Œæ„å‘³ã€ãŒãšã‚Œã¦ã„ã‚‹ã‚¹ãƒˆãƒ«ãƒ¼ãƒ—èª²é¡Œã€‚</p>
            <button data-target="screen-stroop">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">é›†ä¸­</span>
            <h3>ğŸ”¢ æ•°å­—ã‚¿ãƒƒãƒ— 1ã€œ25</h3>
            <p class="muted">1ã‹ã‚‰25ã¾ã§é †ç•ªã«ã‚¿ãƒƒãƒ—ã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯ã€‚</p>
            <button data-target="screen-tap25">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">åˆ†é¡</span>
            <h3>ğŸ§º ä»²é–“åˆ†ã‘</h3>
            <p class="muted">ã“ã¨ã°ã‚’å·¦å³ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«ç´ æ—©ãåˆ†é¡ã€‚</p>
            <button data-target="screen-group">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ¡ãƒ¢ãƒª</span>
            <h3>ğŸ” æ•°å­—é€†é †</h3>
            <p class="muted">å‡ºã¦ããŸæ•°å­—ã‚’é€†ã‹ã‚‰ç­”ãˆã‚‹ã‚²ãƒ¼ãƒ ã€‚</p>
            <button data-target="screen-reverse">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">æ³¨æ„</span>
            <h3>ğŸ” 1ã¤å‰ã‚²ãƒ¼ãƒ </h3>
            <p class="muted">1ã¤å‰ã¨åŒã˜ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã€‚</p>
            <button data-target="screen-nback">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">è¨ˆç®—ãƒ»è¨˜æ†¶</span>
            <h3>â• ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åˆè¨ˆ</h3>
            <p class="muted">æ¬¡ã€…å‡ºã‚‹æ•°å­—ã®åˆè¨ˆã‚’è¦šãˆã¦ãŠãã‚²ãƒ¼ãƒ ã€‚</p>
            <button data-target="screen-flash">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">è¨˜æ†¶ãƒ»é †åº</span>
            <h3>ğŸ”¼ çŸ¢å°è¨˜æ†¶</h3>
            <p class="muted">çŸ¢å°ã®é †ç•ªã‚’è¦šãˆã¦å†ç¾ã€‚</p>
            <button data-target="screen-arrows">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
          <div class="game-card">
            <span class="tag">è¨€è‘‰</span>
            <h3>âœï¸ ã“ã¨ã°ä¸¦ã¹æ›¿ãˆ</h3>
            <p class="muted">ãƒãƒ©ãƒãƒ©ã®æ–‡å­—ã‚’æ­£ã—ã„å˜èªã«ã€‚</p>
            <button data-target="screen-words">ã“ã®ã‚²ãƒ¼ãƒ ã§éŠã¶</button>
          </div>
        </div>

        <h3 style="margin-top:16px;">ã¿ã‚“ãªã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆï¼‰</h3>
        <div class="game-grid">
          <!-- å„ã‚²ãƒ¼ãƒ ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç°¡æ˜“è¡¨ç¤º -->
          <div class="game-card">
            <h3 style="font-size:1.1rem;">âš¡ åå°„</h3>
            <p id="no-ranking-reaction-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-reaction-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">â— è¨ˆç®—</h3>
            <p id="no-ranking-calc-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-calc-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ§© è¨˜æ†¶</h3>
            <p id="no-ranking-memory-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-memory-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ¨ è‰²ã“ã¨ã°</h3>
            <p id="no-ranking-stroop-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-stroop-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ”¢ 1ã€œ25</h3>
            <p id="no-ranking-tap25-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-tap25-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ§º ä»²é–“åˆ†ã‘</h3>
            <p id="no-ranking-group-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-group-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ” é€†é †æ•°å­—</h3>
            <p id="no-ranking-reverse-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-reverse-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ” 1ã¤å‰</h3>
            <p id="no-ranking-nback-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-nback-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">â• ãƒ•ãƒ©ãƒƒã‚·ãƒ¥</h3>
            <p id="no-ranking-flash-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-flash-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">ğŸ”¼ çŸ¢å°</h3>
            <p id="no-ranking-arrows-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-arrows-home" class="ranking-list"></ol>
          </div>
          <div class="game-card">
            <h3 style="font-size:1.1rem;">âœï¸ ã“ã¨ã°</h3>
            <p id="no-ranking-words-home" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <ol id="ranking-words-home" class="ranking-list"></ol>
          </div>
        </div>
      </section>

      <!-- åå°„ç¥çµŒã‚²ãƒ¼ãƒ  -->
      <section id="screen-reaction" class="screen">
        <h2>âš¡ åå°„ç¥çµŒã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã§å°‘ã—å¾…ã¤ã¨ã€ç”»é¢ãŒ<span class="emphasis">ç·‘è‰²</span>ã«ãªã‚Šã¾ã™ã€‚<br />
          ç·‘ã«ãªã£ãŸã‚‰ã€ã§ãã‚‹ã ã‘æ—©ãã€Œä»Šã ï¼ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br />
          ç´å¾—ã„ãè¨˜éŒ²ãŒå‡ºãŸã‚‰<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç™»éŒ²ã—ã¾ã™ã€‚
        </p>

        <div class="game-card" id="reaction-box">
          <p id="reaction-message">æº–å‚™OKï¼Ÿã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚</p>
          <div class="button-row" style="justify-content:center;">
            <button id="reaction-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="reaction-click-btn" disabled>ä»Šã ï¼</button>
            <button id="reaction-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="reaction-result"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>âš¡ åå°„ç¥çµŒãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå°ã•ã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-reaction" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-reaction" class="ranking-list"></ol>
      </section>

      <!-- è¨ˆç®—ãƒãƒ£ãƒ¬ãƒ³ã‚¸ -->
      <section id="screen-calc" class="screen">
        <h2>â— è¨ˆç®—ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼ˆ30ç§’ï¼‰</h2>
        <p class="muted">
          ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã§30ç§’ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãŒå§‹ã¾ã‚Šã¾ã™ã€‚<br />
          è¶³ã—ç®—ãƒ»å¼•ãç®—ã‚’ã§ãã‚‹ã ã‘ãŸãã•ã‚“è§£ãã¾ã—ã‚‡ã†ã€‚<br />
          é€”ä¸­ã§ã‚„ã‚ãŸã„ã¨ãã‚‚<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ãã®å›ã‚’çµ‚ã‚ã‚‰ã›ã¦ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ®‹ã‚Šæ™‚é–“ï¼š<span id="calc-time">30</span> ç§’</span>
            <span>æ­£è§£æ•°ï¼š<span id="calc-score">0</span></span>
          </div>

          <div id="calc-question-area" style="font-size:1.6rem; margin: 8px 0;">
            <span id="calc-question">ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã‚²ãƒ¼ãƒ é–‹å§‹ï¼</span>
          </div>

          <input id="calc-answer" type="number" placeholder="ã“ã“ã«ç­”ãˆã‚’å…¥åŠ›ï¼ˆEnterã§ã‚‚OKï¼‰" disabled />
          <div class="button-row">
            <button id="calc-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="calc-submit-btn" disabled>å›ç­”</button>
            <button id="calc-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="calc-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>â— è¨ˆç®—ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-calc" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-calc" class="ranking-list"></ol>
      </section>

      <!-- è¨˜æ†¶åŠ›ã‚²ãƒ¼ãƒ ï¼ˆè‰²ãƒã‚¹ï¼‰ -->
      <section id="screen-memory" class="screen">
        <h2>ğŸ§© è¨˜æ†¶åŠ›ã‚²ãƒ¼ãƒ ï¼ˆè‰²ãƒã‚¹ï¼‰</h2>
        <p class="muted">
          ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã™ã¨ã€è‰²ã®ãƒã‚¹ãŒé †ç•ªã«å…‰ã‚Šã¾ã™ã€‚<br />
          å…‰ã£ãŸé †ç•ªã©ãŠã‚Šã«ãƒã‚¹ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚<br />
          ä½•åº¦ã‹ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã€æº€è¶³ã—ãŸãƒ¬ãƒ™ãƒ«ã«ãªã£ãŸã‚‰<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç™»éŒ²ã—ã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div id="memory-board">
            <button class="memory-tile" data-index="0"></button>
            <button class="memory-tile" data-index="1"></button>
            <button class="memory-tile" data-index="2"></button>
            <button class="memory-tile" data-index="3"></button>
          </div>
          <p>åˆ°é”ãƒ¬ãƒ™ãƒ«ï¼š<span id="memory-level">0</span></p>
          <div class="button-row">
            <button id="memory-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="memory-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="memory-message" class="muted">ã¾ãšã¯ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚</p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ§© è¨˜æ†¶åŠ›ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-memory" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-memory" class="ranking-list"></ol>
      </section>

      <!-- ã‚¹ãƒˆãƒ«ãƒ¼ãƒ—è‰²ã“ã¨ã° -->
      <section id="screen-stroop" class="screen">
        <h2>ğŸ¨ è‰²ã“ã¨ã°ã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          è¡¨ç¤ºã•ã‚Œã‚‹ã€Œã“ã¨ã°ã€ã®<strong>ã‚¤ãƒ³ã‚¯ã®è‰²</strong>ã‚’ç­”ãˆã‚‹ã‚²ãƒ¼ãƒ ã§ã™ã€‚<br />
          ä¾‹ï¼šã€Œèµ¤ã€ã¨ã„ã†æ–‡å­—ãŒé’è‰²ã§è¡¨ç¤º â†’ æ­£è§£ã¯ã€Œé’ã€ã€‚<br />
          æ­£è§£æ•°ãŒã‚¹ã‚³ã‚¢ã«ãªã‚Šã¾ã™ã€‚æ°—ã«å…¥ã£ãŸçµæœãŒå‡ºãŸã‚‰<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ­£è§£æ•°ï¼š<span id="stroop-correct">0</span></span>
            <span>å•é¡Œæ•°ï¼š<span id="stroop-total">0</span></span>
          </div>
          <div id="stroop-word">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</div>
          <div class="button-row">
            <button class="big-option-btn" data-stroop-answer="èµ¤">èµ¤</button>
            <button class="big-option-btn" data-stroop-answer="é’">é’</button>
            <button class="big-option-btn" data-stroop-answer="ç·‘">ç·‘</button>
            <button class="big-option-btn" data-stroop-answer="é»„">é»„</button>
          </div>
          <div class="button-row" style="margin-top:10px;">
            <button id="stroop-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="stroop-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="stroop-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ¨ è‰²ã“ã¨ã°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-stroop" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-stroop" class="ranking-list"></ol>
      </section>

      <!-- æ•°å­—ã‚¿ãƒƒãƒ— 1ã€œ25 -->
      <section id="screen-tap25" class="screen">
        <h2>ğŸ”¢ æ•°å­—ã‚¿ãƒƒãƒ— 1ã€œ25</h2>
        <p class="muted">
          ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã§1ã€œ25ã®æ•°å­—ãŒãƒãƒ©ãƒãƒ©ã«ä¸¦ã³ã¾ã™ã€‚<br />
          1â†’2â†’3â€¦ã¨é †ç•ªã«ã‚¿ãƒƒãƒ—ã—ã¦ã„ãã€25ã¾ã§æŠ¼ã—åˆ‡ã‚‹ã‚¿ã‚¤ãƒ ã‚’ç«¶ã„ã¾ã™ã€‚<br />
          ã‚¯ãƒªã‚¢å¾Œã«<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ã‚¿ã‚¤ãƒ ã‚’ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ¬¡ã®æ•°å­—ï¼š<span id="tap25-next">1</span></span>
            <span>çµŒéæ™‚é–“ï¼š<span id="tap25-time">0.0</span> ç§’</span>
          </div>
          <div id="tap25-board"></div>
          <div class="button-row" style="margin-top:10px;">
            <button id="tap25-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="tap25-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="tap25-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ”¢ 1ã€œ25 ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå°ã•ã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-tap25" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-tap25" class="ranking-list"></ol>
      </section>

      <!-- ä»²é–“åˆ†ã‘ -->
      <section id="screen-group" class="screen">
        <h2>ğŸ§º ä»²é–“åˆ†ã‘ã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          å‡ºã¦ãã‚‹ã“ã¨ã°ã‚’ã€å·¦ã€Œç”Ÿãç‰©ã€ã‹å³ã€Œé£Ÿã¹ç‰©ã€ã‹ã«åˆ†ã‘ã¦ãã ã•ã„ã€‚<br />
          æ­£è§£æ•°ãŒã‚¹ã‚³ã‚¢ã«ãªã‚Šã¾ã™ã€‚å¥½ããªã¨ã“ã‚ã§<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã—ã¦ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ­£è§£æ•°ï¼š<span id="group-correct">0</span></span>
            <span>å•é¡Œæ•°ï¼š<span id="group-total">0</span></span>
          </div>
          <div style="font-size:1.8rem; text-align:center; margin:10px 0;">
            <span id="group-word">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <div class="button-row">
            <button class="big-option-btn" id="group-left-btn">ç”Ÿãç‰©</button>
            <button class="big-option-btn" id="group-right-btn">é£Ÿã¹ç‰©</button>
          </div>
          <div class="button-row" style="margin-top:10px;">
            <button id="group-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="group-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="group-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ§º ä»²é–“åˆ†ã‘ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-group" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-group" class="ranking-list"></ol>
      </section>

      <!-- æ•°å­—é€†é † -->
      <section id="screen-reverse" class="screen">
        <h2>ğŸ” æ•°å­—é€†é †ã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          æ•°å­—ãŒ1åˆ—è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãã®ã‚ã¨ã€<strong>é€†ã®é †ç•ª</strong>ã§æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br />
          1å•æ­£è§£ã™ã‚‹ã”ã¨ã«æ¡æ•°ãŒ1ã¤å¢—ãˆã¦ã„ãã¾ã™ã€‚<br />
          ã¾ã¡ãŒãˆãŸã¨ãã®ã€Œåˆ°é”ãƒ¬ãƒ™ãƒ«ã€ãŒã‚¹ã‚³ã‚¢ã§ã™ã€‚ä½•å›ã‹æŒ‘æˆ¦ã—ã¦ã€<strong>æº€è¶³ã—ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ç™»éŒ²ã—ã¾ã—ã‚‡ã†ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>ç¾åœ¨ãƒ¬ãƒ™ãƒ«ï¼š<span id="reverse-level">1</span></span>
            <span>æœ€é«˜ãƒ¬ãƒ™ãƒ«ï¼š<span id="reverse-best">0</span></span>
          </div>
          <div style="font-size:1.8rem; text-align:center; margin:10px 0;">
            å•é¡Œï¼š<span id="reverse-seq">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <input id="reverse-answer" type="text" placeholder="ã“ã“ã«é€†é †ã§æ•°å­—ã‚’å…¥åŠ›" disabled />
          <div class="button-row">
            <button id="reverse-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="reverse-submit-btn" disabled>å›ç­”</button>
            <button id="reverse-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="reverse-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ” æ•°å­—é€†é †ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-reverse" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-reverse" class="ranking-list"></ol>
      </section>

      <!-- 1ã¤å‰ã‚²ãƒ¼ãƒ  -->
      <section id="screen-nback" class="screen">
        <h2>ğŸ” 1ã¤å‰ã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          Aã€œDã®æ–‡å­—ãŒé †ç•ªã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br />
          ä»Šå‡ºã¦ã„ã‚‹æ–‡å­—ãŒ<strong>1ã¤å‰ã¨åŒã˜ã¨ãã ã‘ã€ŒåŒã˜ï¼ã€ãƒœã‚¿ãƒ³</strong>ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br />
          æ­£è§£ã—ãŸå›æ•°ãŒã‚¹ã‚³ã‚¢ã§ã™ã€‚ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§çµæœã‚’ã¾ã¨ã‚ã¦ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ­£è§£æ•°ï¼š<span id="nback-correct">0</span></span>
            <span>ãƒŸã‚¹ï¼š<span id="nback-miss">0</span></span>
          </div>
          <div style="font-size:2.2rem; text-align:center; margin:10px 0;">
            <span id="nback-letter">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <div class="button-row" style="justify-content:center;">
            <button id="nback-hit-btn" class="big-option-btn">åŒã˜ï¼</button>
          </div>
          <div class="button-row" style="margin-top:10px;">
            <button id="nback-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="nback-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="nback-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ” 1ã¤å‰ã‚²ãƒ¼ãƒ  ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-nback" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-nback" class="ranking-list"></ol>
      </section>

      <!-- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åˆè¨ˆ -->
      <section id="screen-flash" class="screen">
        <h2>â• ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åˆè¨ˆã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          1ã‚±ã‚¿ã®æ•°å­—ãŒæ¬¡ã€…ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã™ã¹ã¦ã®æ•°å­—ã®<strong>åˆè¨ˆ</strong>ã‚’è¦šãˆã¦ãŠãã€æœ€å¾Œã«ç­”ãˆã¾ã—ã‚‡ã†ã€‚<br />
          1ãƒ©ã‚¦ãƒ³ãƒ‰çµ‚ã‚ã‚‹ãŸã³ã«æ–°ã—ã„ãƒ©ã‚¦ãƒ³ãƒ‰ãŒå§‹ã¾ã‚Šã¾ã™ã€‚æ­£è§£ã—ãŸå›æ•°ãŒã‚¹ã‚³ã‚¢ã§ã™ã€‚<br />
          ã„ã„ã¨ã“ã‚ã¾ã§ã„ã£ãŸã‚‰<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ­£è§£æ•°ï¼š<span id="flash-correct">0</span></span>
            <span>ãƒ©ã‚¦ãƒ³ãƒ‰æ•°ï¼š<span id="flash-round">0</span></span>
          </div>
          <div style="font-size:2.2rem; text-align:center; margin:10px 0;">
            <span id="flash-number">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <input id="flash-answer" type="number" placeholder="åˆè¨ˆã‚’å…¥åŠ›" disabled />
          <div class="button-row">
            <button id="flash-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="flash-submit-btn" disabled>å›ç­”</button>
            <button id="flash-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="flash-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>â• ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åˆè¨ˆ ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-flash" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-flash" class="ranking-list"></ol>
      </section>

      <!-- çŸ¢å°è¨˜æ†¶ -->
      <section id="screen-arrows" class="screen">
        <h2>ğŸ”¼ çŸ¢å°è¨˜æ†¶ã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          çŸ¢å°ï¼ˆâ†‘â†’â†“â†ï¼‰ãŒé †ç•ªã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br />
          ã‚ˆãè¦šãˆã¦ã€åŒã˜é †ç•ªã§ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br />
          ã¾ã¡ãŒãˆãŸã¨ãã®ãƒ¬ãƒ™ãƒ«ãŒã‚¹ã‚³ã‚¢ã§ã™ã€‚æº€è¶³ã—ãŸã‚‰<strong>ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€</strong>ã§ç™»éŒ²ã§ãã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>ç¾åœ¨ãƒ¬ãƒ™ãƒ«ï¼š<span id="arrows-level">1</span></span>
            <span>æœ€é«˜ãƒ¬ãƒ™ãƒ«ï¼š<span id="arrows-best">0</span></span>
          </div>
          <div style="font-size:2rem; text-align:center; margin:10px 0;">
            <span id="arrows-seq">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <div class="button-row">
            <button class="arrow-btn" data-arrow="â†‘">â†‘</button>
            <button class="arrow-btn" data-arrow="â†’">â†’</button>
            <button class="arrow-btn" data-arrow="â†“">â†“</button>
            <button class="arrow-btn" data-arrow="â†">â†</button>
          </div>
          <div class="button-row" style="margin-top:10px;">
            <button id="arrows-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="arrows-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="arrows-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>ğŸ”¼ çŸ¢å°è¨˜æ†¶ ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆãƒ¬ãƒ™ãƒ«ãŒé«˜ã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-arrows" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-arrows" class="ranking-list"></ol>
      </section>

      <!-- ã“ã¨ã°ä¸¦ã¹æ›¿ãˆ -->
      <section id="screen-words" class="screen">
        <h2>âœï¸ ã“ã¨ã°ä¸¦ã¹æ›¿ãˆã‚²ãƒ¼ãƒ </h2>
        <p class="muted">
          ã²ã‚‰ãŒãªã®é †ç•ªãŒãƒãƒ©ãƒãƒ©ã«ãªã£ãŸã“ã¨ã°ãŒå‡ºã¾ã™ã€‚<br />
          æ­£ã—ã„ã“ã¨ã°ã«ãªã‚‹ã‚ˆã†ã«ä¸¦ã¹æ›¿ãˆã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br />
          æ­£è§£ã—ãŸå›æ•°ãŒã‚¹ã‚³ã‚¢ã§ã™ã€‚ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã—ã¾ã™ã€‚
        </p>

        <div class="game-card">
          <div class="status-row">
            <span>æ­£è§£æ•°ï¼š<span id="words-correct">0</span></span>
            <span>å•é¡Œæ•°ï¼š<span id="words-total">0</span></span>
          </div>
          <div style="font-size:1.8rem; text-align:center; margin:10px 0;">
            <span id="words-scrambled">ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­</span>
          </div>
          <input id="words-answer" type="text" placeholder="æ­£ã—ã„ã“ã¨ã°ã‚’å…¥åŠ›" disabled />
          <div class="button-row">
            <button id="words-start-btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button id="words-submit-btn" disabled>å›ç­”</button>
            <button id="words-end-btn" class="btn-secondary">çµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆ</button>
          </div>
          <p id="words-message" class="muted"></p>
        </div>

        <button class="home-btn" data-target="screen-home">ğŸ  ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</button>

        <h3>âœï¸ ã“ã¨ã°ä¸¦ã¹æ›¿ãˆ ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆå¤šã„ã»ã©ã‚¹ã‚´ã‚¤ï¼‰</h3>
        <p id="no-ranking-words" class="muted">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        <ol id="ranking-words" class="ranking-list"></ol>
      </section>
    </main>
  </div>

  <script>
    // ===== ç”»é¢åˆ‡ã‚Šæ›¿ãˆ =====
    const screens = document.querySelectorAll(".screen");
    function showScreen(id) {
      screens.forEach((s) => s.classList.remove("active"));
      const target = document.getElementById(id);
      if (target) target.classList.add("active");
    }
    document.querySelectorAll("[data-target]").forEach((btn) => {
      btn.addEventListener("click", () => {
        const id = btn.getAttribute("data-target");
        // è¨ˆç®—ã‚²ãƒ¼ãƒ ãªã©ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’å®‰å…¨ã«æ­¢ã‚ã‚‹ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å‡ºã•ãªã„ï¼‰
        if (window.calcForceStop) window.calcForceStop();
        if (window.nbackForceStop) window.nbackForceStop();
        if (window.flashForceStop) window.flashForceStop();
        if (window.tap25ForceStop) window.tap25ForceStop();
        showScreen(id);
      });
    });

    // ===== ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç®¡ç† =====
    const RANKING_KEY = "brainTrainerRankings_v3";
    let rankings = {};

    function loadRankings() {
      try {
        const saved = localStorage.getItem(RANKING_KEY);
        if (saved) {
          rankings = JSON.parse(saved);
        }
      } catch (e) {
        console.warn("ãƒ©ãƒ³ã‚­ãƒ³ã‚°èª­ã¿è¾¼ã¿å¤±æ•—:", e);
        rankings = {};
      }
    }

    function saveRankings() {
      try {
        localStorage.setItem(RANKING_KEY, JSON.stringify(rankings));
      } catch (e) {
        console.warn("ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä¿å­˜å¤±æ•—:", e);
      }
    }

    function addScore(gameId, name, score, higherIsBetter) {
      if (!rankings[gameId]) rankings[gameId] = [];
      rankings[gameId].push({ name, score });

      rankings[gameId].sort((a, b) => {
        return higherIsBetter ? b.score - a.score : a.score - b.score;
      });

      rankings[gameId] = rankings[gameId].slice(0, 10);
      saveRankings();
      renderRanking(gameId);
    }

    function renderRankingList(gameId, suffix) {
      const list = document.getElementById(`ranking-${gameId}${suffix}`);
      const noMsg = document.getElementById(`no-ranking-${gameId}${suffix}`);
      if (!list) return;
      list.innerHTML = "";

      const data = rankings[gameId] || [];
      if (!data.length) {
        if (noMsg) noMsg.style.display = "block";
        return;
      }
      if (noMsg) noMsg.style.display = "none";

      data.forEach((entry, index) => {
        const li = document.createElement("li");
        let medal = "";
        if (index === 0) medal = "ğŸ‘‘ ";
        else if (index === 1) medal = "ğŸ¥ˆ ";
        else if (index === 2) medal = "ğŸ¥‰ ";

        let unit = "";
        if (gameId === "reaction") unit = " ms";
        if (gameId === "calc") unit = " å•";
        if (gameId === "memory") unit = " ãƒ¬ãƒ™ãƒ«";
        if (gameId === "stroop") unit = " å•";
        if (gameId === "tap25") unit = " ç§’";
        if (gameId === "group") unit = " å•";
        if (gameId === "reverse") unit = " ãƒ¬ãƒ™ãƒ«";
        if (gameId === "nback") unit = " å›";
        if (gameId === "flash") unit = " å›";
        if (gameId === "arrows") unit = " ãƒ¬ãƒ™ãƒ«";
        if (gameId === "words") unit = " å•";

        li.textContent = `${medal}${index + 1}ä½: ${entry.name} - ${entry.score}${unit}`;
        list.appendChild(li);
      });
    }

    function renderRanking(gameId) {
      renderRankingList(gameId, "");
      renderRankingList(gameId, "-home");
    }

    function askNameAndSave(gameId, score, higherIsBetter) {
      if (score == null || Number.isNaN(score)) return;

      let comment = "";
      if (gameId === "reaction") {
        if (score < 150) comment = "ç¥é€Ÿï¼äººé–“é›¢ã‚Œã—ãŸåå°„ç¥çµŒï¼";
        else if (score < 250) comment = "ã‹ãªã‚Šé€Ÿã„ï¼ãƒŠã‚¤ã‚¹é›†ä¸­ï¼";
        else comment = "ã¾ãšã¯ã“ã“ã‹ã‚‰ã€‚ã‚‚ã†ä¸€å›ã‚„ã£ã¦ã¿ã‚ˆã†ï¼";
      } else if (gameId === "calc") {
        if (score >= 20) comment = "å¤©æ‰ç´šã®è¨ˆç®—åŠ›ï¼";
        else if (score >= 10) comment = "ã„ã„ãƒšãƒ¼ã‚¹ï¼ãã®èª¿å­ï¼";
        else comment = "ã‚¦ã‚©ãƒ¼ãƒŸãƒ³ã‚°ã‚¢ãƒƒãƒ—ã¯ã“ã“ã‹ã‚‰ï¼";
      } else if (gameId === "memory" || gameId === "reverse" || gameId === "arrows") {
        if (score >= 10) comment = "ã™ã”ã„è¨˜æ†¶åŠ›ï¼";
        else if (score >= 5) comment = "é›†ä¸­ã§ãã¦ã‚‹ï¼";
        else comment = "ç¶šã‘ã‚Œã°ã‚‚ã£ã¨ä¼¸ã³ã‚‹ã‚ˆï¼";
      } else if (gameId === "tap25") {
        if (score <= 25) comment = "è¶…é«˜é€Ÿã‚¯ãƒªã‚¢ï¼";
        else if (score <= 40) comment = "ãªã‹ãªã‹ã®é€Ÿã•ï¼";
        else comment = "æ¬¡ã¯ã‚‚ã†å°‘ã—æ€¥ã„ã§ã¿ã‚ˆã†ï¼";
      } else if (["stroop", "group", "nback", "flash", "words"].includes(gameId)) {
        if (score >= 20) comment = "é›†ä¸­åŠ›ãƒãƒƒãƒãƒªï¼";
        else if (score >= 10) comment = "ã„ã„èª¿å­ï¼";
        else comment = "å°‘ã—ãšã¤æ…£ã‚Œã¦ã„ã“ã†ï¼";
      }

      if (comment) alert(comment);

      const name = prompt("ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ç™»éŒ²ã™ã‚‹åå‰ã‚’å…¥åŠ›ã—ã¦ã­ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ã‚¹ã‚­ãƒƒãƒ—ï¼‰");
      if (name && name.trim()) {
        addScore(gameId, name.trim(), score, higherIsBetter);
        alert("ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ç™»éŒ²ã—ãŸã‚ˆï¼");
      }
    }

    // ===== åå°„ç¥çµŒã‚²ãƒ¼ãƒ  =====
    (function setupReactionGame() {
      const box = document.getElementById("reaction-box");
      const message = document.getElementById("reaction-message");
      const result = document.getElementById("reaction-result");
      const startBtn = document.getElementById("reaction-start-btn");
      const clickBtn = document.getElementById("reaction-click-btn");
      const endBtn = document.getElementById("reaction-end-btn");

      let state = "idle"; // idle | waiting | go
      let timeoutId = null;
      let startTime = 0;
      let lastScore = null;

      function resetForNext() {
        state = "idle";
        startBtn.disabled = false;
        clickBtn.disabled = true;
        box.classList.remove("go");
        if (timeoutId) clearTimeout(timeoutId);
        timeoutId = null;
      }

      startBtn.addEventListener("click", () => {
        resetForNext();
        state = "waiting";
        startBtn.disabled = true;
        clickBtn.disabled = false;
        result.textContent = "";
        message.textContent = "è‰²ãŒå¤‰ã‚ã‚‹ã¾ã§ã˜ã£ã¨å¾…ã£ã¦â€¦ ãƒ•ãƒ©ã‚¤ãƒ³ã‚°ç¦æ­¢ï¼";

        const delay = 1500 + Math.random() * 2000;
        timeoutId = setTimeout(() => {
          state = "go";
          box.classList.add("go");
          message.textContent = "ä»Šã ï¼ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ï¼";
          startTime = performance.now();
        }, delay);
      });

      clickBtn.addEventListener("click", () => {
        if (state === "waiting") {
          message.textContent = "ãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼ã‚‚ã†ä¸€åº¦ã‚„ã£ã¦ã¿ã‚ˆã†ã€‚";
          result.textContent = "";
          resetForNext();
          return;
        }
        if (state === "go") {
          const diff = Math.round(performance.now() - startTime);
          lastScore = diff;
          result.textContent = `ä»Šå›ã®åå¿œæ™‚é–“ï¼š${diff} ms`;
          message.textContent = "ç´å¾—ã„ãè¨˜éŒ²ãŒå‡ºãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç™»éŒ²ã—ã¦ã­ã€‚";
          resetForNext();
        }
      });

      endBtn.addEventListener("click", () => {
        resetForNext();
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          message.textContent = "æº–å‚™OKï¼Ÿã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
          result.textContent = "";
          return;
        }
        askNameAndSave("reaction", lastScore, false);
        lastScore = null;
        message.textContent = "æº–å‚™OKï¼Ÿã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
        result.textContent = "";
      });
    })();

    // ===== è¨ˆç®—ãƒãƒ£ãƒ¬ãƒ³ã‚¸ =====
    (function setupCalcGame() {
      const timeEl = document.getElementById("calc-time");
      const scoreEl = document.getElementById("calc-score");
      const questionEl = document.getElementById("calc-question");
      const answerInput = document.getElementById("calc-answer");
      const startBtn = document.getElementById("calc-start-btn");
      const submitBtn = document.getElementById("calc-submit-btn");
      const endBtn = document.getElementById("calc-end-btn");
      const msg = document.getElementById("calc-message");

      let remaining = 30;
      let score = 0;
      let currentAnswer = null;
      let timerId = null;
      let playing = false;
      let lastScore = null;

      function updateDisplay() {
        timeEl.textContent = remaining;
        scoreEl.textContent = score;
      }

      function resetAll() {
        playing = false;
        if (timerId) clearInterval(timerId);
        timerId = null;
        remaining = 30;
        score = 0;
        lastScore = null;
        updateDisplay();
        questionEl.textContent = "ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã‚²ãƒ¼ãƒ é–‹å§‹ï¼";
        answerInput.value = "";
        answerInput.disabled = true;
        submitBtn.disabled = true;
        startBtn.disabled = false;
        msg.textContent = "";
      }

      function makeQuestion() {
        const a = Math.floor(Math.random() * 20) + 1;
        const b = Math.floor(Math.random() * 20) + 1;
        const usePlus = Math.random() < 0.5;
        let text, ans;
        if (usePlus) {
          text = `${a} + ${b} = ?`;
          ans = a + b;
        } else {
          const bigger = Math.max(a, b);
          const smaller = Math.min(a, b);
          text = `${bigger} - ${smaller} = ?`;
          ans = bigger - smaller;
        }
        questionEl.textContent = text;
        currentAnswer = ans;
      }

      function finishRun(reason) {
        playing = false;
        if (timerId) clearInterval(timerId);
        timerId = null;
        answerInput.disabled = true;
        submitBtn.disabled = true;
        startBtn.disabled = false;
        lastScore = score;
        if (reason === "time") {
          msg.textContent = `æ™‚é–“åˆ‡ã‚Œï¼æ­£è§£æ•°ã¯ ${score} å•ã§ã—ãŸã€‚æ°—ã«å…¥ã£ãŸçµæœãªã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚`;
        } else if (reason === "manual") {
          msg.textContent = `æ‰‹å‹•ã§çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£æ•°ã¯ ${score} å•ã§ã—ãŸã€‚`;
        }
      }

      function handleAnswer() {
        if (!playing) return;
        const val = parseInt(answerInput.value, 10);
        if (Number.isNaN(val)) {
          msg.textContent = "æ•°å­—ã§ç­”ãˆã‚’å…¥åŠ›ã—ã¦ã­ã€‚";
          return;
        }
        if (val === currentAnswer) {
          score++;
          msg.textContent = "æ­£è§£ï¼ã„ã„ãƒšãƒ¼ã‚¹ï¼";
        } else {
          msg.textContent = `ãŠã—ã„â€¦ æ­£è§£ã¯ ${currentAnswer} ã§ã—ãŸã€‚`;
        }
        answerInput.value = "";
        updateDisplay();
        makeQuestion();
      }

      startBtn.addEventListener("click", () => {
        playing = true;
        remaining = 30;
        score = 0;
        updateDisplay();
        makeQuestion();
        answerInput.disabled = false;
        submitBtn.disabled = false;
        startBtn.disabled = true;
        msg.textContent = "é›†ä¸­ã—ã¦ã„ã“ã†ï¼";
        answerInput.value = "";
        answerInput.focus();

        if (timerId) clearInterval(timerId);
        timerId = setInterval(() => {
          remaining--;
          updateDisplay();
          if (remaining <= 0) {
            finishRun("time");
          }
        }, 1000);
      });

      submitBtn.addEventListener("click", handleAnswer);
      answerInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") handleAnswer();
      });

      endBtn.addEventListener("click", () => {
        if (playing) {
          finishRun("manual");
        }
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ã‚²ãƒ¼ãƒ ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã­ã€‚");
          resetAll();
          return;
        }
        askNameAndSave("calc", lastScore, true);
        resetAll();
      });

      // ç”»é¢é·ç§»æ™‚ã«å¼·åˆ¶ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—ï¼‰
      window.calcForceStop = function () {
        if (timerId) clearInterval(timerId);
        timerId = null;
        playing = false;
        remaining = 30;
        score = 0;
        lastScore = null;
        updateDisplay();
        answerInput.disabled = true;
        submitBtn.disabled = true;
        startBtn.disabled = false;
        msg.textContent = "";
        questionEl.textContent = "ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã‚²ãƒ¼ãƒ é–‹å§‹ï¼";
      };
    })();

    // ===== è¨˜æ†¶åŠ›ã‚²ãƒ¼ãƒ ï¼ˆè‰²ãƒã‚¹ï¼‰ =====
    (function setupMemoryGame() {
      const tiles = Array.from(document.querySelectorAll(".memory-tile"));
      const levelEl = document.getElementById("memory-level");
      const startBtn = document.getElementById("memory-start-btn");
      const endBtn = document.getElementById("memory-end-btn");
      const msg = document.getElementById("memory-message");

      let sequence = [];
      let userIndex = 0;
      let level = 0;
      let busyShowing = false;
      let playing = false;
      let showTimers = [];
      let lastScore = null;

      function clearTimers() {
        showTimers.forEach((id) => clearTimeout(id));
        showTimers = [];
      }

      function setLevelDisplay() {
        levelEl.textContent = level;
      }

      function flashTile(index, delay) {
        const tile = tiles[index];
        const t1 = setTimeout(() => {
          tile.classList.add("active");
        }, delay);
        const t2 = setTimeout(() => {
          tile.classList.remove("active");
        }, delay + 400);
        showTimers.push(t1, t2);
      }

      function showSequence() {
        busyShowing = true;
        msg.textContent = "ã‚ˆãè¦‹ã¦è¦šãˆã¦ã­â€¦";
        clearTimers();
        sequence.forEach((idx, i) => {
          flashTile(idx, i * 600);
        });
        const total = sequence.length * 600;
        const endTimer = setTimeout(() => {
          busyShowing = false;
          msg.textContent = "ä»Šåº¦ã¯åŒã˜é †ç•ªã§ã‚¿ãƒƒãƒ—ã—ã¦ã­ï¼";
        }, total + 500);
        showTimers.push(endTimer);
      }

      function nextRound() {
        level++;
        setLevelDisplay();
        userIndex = 0;
        sequence.push(Math.floor(Math.random() * 4));
        showSequence();
      }

      function gameOver() {
        playing = false;
        clearTimers();
        tiles.forEach((t) => t.classList.remove("active"));
        lastScore = level;
        msg.textContent = `ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼â€¦ åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${level} ã§ã—ãŸã€‚æº€è¶³ã—ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚`;
        startBtn.textContent = "ã‚‚ã†ä¸€å›ï¼";
      }

      function resetAll() {
        sequence = [];
        userIndex = 0;
        level = 0;
        setLevelDisplay();
        playing = false;
        busyShowing = false;
        clearTimers();
        tiles.forEach((t) => t.classList.remove("active"));
        msg.textContent = "ã¾ãšã¯ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
        startBtn.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆ";
        lastScore = null;
      }

      function startGame() {
        resetAll();
        playing = true;
        msg.textContent = "ã•ã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆï¼";
        startBtn.textContent = "ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ";
        nextRound();
      }

      startBtn.addEventListener("click", () => {
        if (busyShowing) return;
        startGame();
      });

      endBtn.addEventListener("click", () => {
        if (playing) {
          playing = false;
          clearTimers();
          tiles.forEach((t) => t.classList.remove("active"));
          msg.textContent = `æ‰‹å‹•ã§çµ‚äº†ã—ã¾ã—ãŸã€‚åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${level} ã§ã—ãŸã€‚`;
          lastScore = level;
        }
        if (!lastScore || lastScore <= 0) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          resetAll();
          return;
        }
        askNameAndSave("memory", lastScore, true);
        resetAll();
      });

      tiles.forEach((tile) => {
        tile.addEventListener("click", () => {
          if (!playing || busyShowing) return;
          const idx = parseInt(tile.getAttribute("data-index"), 10);
          const expected = sequence[userIndex];
          if (idx === expected) {
            tile.classList.add("active");
            setTimeout(() => tile.classList.remove("active"), 200);
            userIndex++;
            if (userIndex >= sequence.length) {
              msg.textContent = "ã™ã”ã„ï¼æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸ï¼";
              setTimeout(() => {
                nextRound();
              }, 700);
            }
          } else {
            gameOver();
          }
        });
      });
    })();

    // ===== ã‚¹ãƒˆãƒ«ãƒ¼ãƒ—è‰²ã“ã¨ã° =====
    (function setupStroop() {
      const colors = ["èµ¤", "é’", "ç·‘", "é»„"];
      const colorValues = {
        "èµ¤": "#ef4444",
        "é’": "#3b82f6",
        "ç·‘": "#22c55e",
        "é»„": "#eab308"
      };

      const wordEl = document.getElementById("stroop-word");
      const correctEl = document.getElementById("stroop-correct");
      const totalEl = document.getElementById("stroop-total");
      const msg = document.getElementById("stroop-message");
      const startBtn = document.getElementById("stroop-start-btn");
      const endBtn = document.getElementById("stroop-end-btn");
      const optionButtons = document.querySelectorAll("[data-stroop-answer]");

      let playing = false;
      let correct = 0;
      let total = 0;
      let currentColor = null; // æ­£è§£ã¨ãªã‚‹ã‚¤ãƒ³ã‚¯ã®è‰²
      let lastScore = null;

      function updateDisplay() {
        correctEl.textContent = correct;
        totalEl.textContent = total;
      }

      function newQuestion() {
        const textColor = colors[Math.floor(Math.random() * colors.length)];
        const inkColor = colors[Math.floor(Math.random() * colors.length)];
        currentColor = inkColor;
        wordEl.textContent = textColor;
        wordEl.style.color = colorValues[inkColor];
        total++;
        updateDisplay();
      }

      startBtn.addEventListener("click", () => {
        playing = true;
        correct = 0;
        total = 0;
        lastScore = null;
        updateDisplay();
        msg.textContent = "ã‚¤ãƒ³ã‚¯ã®è‰²ã‚’ç­”ãˆã¦ã­ã€‚";
        newQuestion();
      });

      optionButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          if (!playing) {
            msg.textContent = "ã¾ãšã¯ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
            return;
          }
          const ans = btn.getAttribute("data-stroop-answer");
          if (ans === currentColor) {
            correct++;
            msg.textContent = "æ­£è§£ï¼";
          } else {
            msg.textContent = "ãŠã—ã„â€¦ ã‚¤ãƒ³ã‚¯ã®è‰²ã‚’ã‚ˆãè¦‹ã¦ã¿ã‚ˆã†ã€‚";
          }
          lastScore = correct;
          newQuestion();
        });
      });

      endBtn.addEventListener("click", () => {
        playing = false;
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          wordEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          wordEl.style.color = "#f9fafb";
          msg.textContent = "";
          correct = 0;
          total = 0;
          updateDisplay();
          return;
        }
        msg.textContent = `çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£æ•°ã¯ ${lastScore} å•ã§ã—ãŸã€‚`;
        askNameAndSave("stroop", lastScore, true);
        wordEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        wordEl.style.color = "#f9fafb";
        correct = 0;
        total = 0;
        lastScore = null;
        updateDisplay();
      });
    })();

    // ===== æ•°å­—ã‚¿ãƒƒãƒ— 1ã€œ25 =====
    (function setupTap25() {
      const board = document.getElementById("tap25-board");
      const nextEl = document.getElementById("tap25-next");
      const timeEl = document.getElementById("tap25-time");
      const startBtn = document.getElementById("tap25-start-btn");
      const endBtn = document.getElementById("tap25-end-btn");
      const msg = document.getElementById("tap25-message");

      let nextNumber = 1;
      let startTime = null;
      let timerId = null;
      let playing = false;
      let lastTimeSec = null;

      function updateDisplay() {
        nextEl.textContent = nextNumber;
      }

      function resetBoard() {
        board.innerHTML = "";
        const nums = Array.from({ length: 25 }, (_, i) => i + 1);
        for (let i = nums.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [nums[i], nums[j]] = [nums[j], nums[i]];
        }
        nums.forEach((n) => {
          const btn = document.createElement("button");
          btn.className = "tap25-cell";
          btn.textContent = n;
          btn.addEventListener("click", () => handleClick(btn, n));
          board.appendChild(btn);
        });
      }

      function handleClick(btn, num) {
        if (!playing) return;
        if (num === nextNumber) {
          btn.classList.add("done");
          if (nextNumber === 1) {
            startTime = performance.now();
            if (timerId) clearInterval(timerId);
            timerId = setInterval(() => {
              const t = (performance.now() - startTime) / 1000;
              timeEl.textContent = t.toFixed(1);
            }, 100);
          }
          nextNumber++;
          updateDisplay();
          if (nextNumber > 25) {
            playing = false;
            if (timerId) clearInterval(timerId);
            timerId = null;
            const t = (performance.now() - startTime) / 1000;
            lastTimeSec = Number(t.toFixed(1));
            msg.textContent = `ã‚¯ãƒªã‚¢ï¼ã‚¿ã‚¤ãƒ ã¯ ${lastTimeSec} ç§’ã§ã—ãŸã€‚æ°—ã«å…¥ã£ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚`;
          }
        } else {
          msg.textContent = "æ•°å­—ã¯é †ç•ªã«æŠ¼ã—ã¦ã­ã€‚";
        }
      }

      function resetAll() {
        playing = false;
        if (timerId) clearInterval(timerId);
        timerId = null;
        nextNumber = 1;
        startTime = null;
        lastTimeSec = null;
        timeEl.textContent = "0.0";
        updateDisplay();
        resetBoard();
        msg.textContent = "";
      }

      startBtn.addEventListener("click", () => {
        resetAll();
        playing = true;
        msg.textContent = "1ã‹ã‚‰é †ç•ªã«ã‚¿ãƒƒãƒ—ã—ã¦ã­ã€‚";
      });

      endBtn.addEventListener("click", () => {
        if (playing) {
          playing = false;
          if (timerId) clearInterval(timerId);
          timerId = null;
          msg.textContent = "é€”ä¸­ã§çµ‚äº†ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã‚ˆã†ã€‚";
          nextNumber = 1;
          updateDisplay();
          return;
        }
        if (lastTimeSec == null) {
          alert("ã¾ã ã‚¯ãƒªã‚¢ã—ãŸè¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯25ã¾ã§ã‚¿ãƒƒãƒ—ã—ã¦ã¿ã‚ˆã†ï¼");
          resetAll();
          return;
        }
        askNameAndSave("tap25", lastTimeSec, false);
        resetAll();
      });

      // ç”»é¢é·ç§»æ™‚ãªã©ç”¨ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—ï¼‰
      window.tap25ForceStop = function () {
        if (timerId) clearInterval(timerId);
        timerId = null;
        playing = false;
        timeEl.textContent = "0.0";
        nextNumber = 1;
        updateDisplay();
        msg.textContent = "";
      };

      resetBoard();
      updateDisplay();
    })();

    // ===== ä»²é–“åˆ†ã‘ =====
    (function setupGroup() {
      const items = [
        { word: "ã„ã¬", cat: "ç”Ÿãç‰©" },
        { word: "ã­ã“", cat: "ç”Ÿãç‰©" },
        { word: "ã•ã‹ãª", cat: "ç”Ÿãç‰©" },
        { word: "ã¨ã‚Š", cat: "ç”Ÿãç‰©" },
        { word: "ã”ã‚Šã‚‰", cat: "ç”Ÿãç‰©" },
        { word: "ã‚Šã‚“ã”", cat: "é£Ÿã¹ç‰©" },
        { word: "ã”ã¯ã‚“", cat: "é£Ÿã¹ç‰©" },
        { word: "ãƒ‘ãƒ³", cat: "é£Ÿã¹ç‰©" },
        { word: "ãƒ©ãƒ¼ãƒ¡ãƒ³", cat: "é£Ÿã¹ç‰©" },
        { word: "ã‚±ãƒ¼ã‚­", cat: "é£Ÿã¹ç‰©" }
      ];

      const wordEl = document.getElementById("group-word");
      const correctEl = document.getElementById("group-correct");
      const totalEl = document.getElementById("group-total");
      const msg = document.getElementById("group-message");
      const leftBtn = document.getElementById("group-left-btn");
      const rightBtn = document.getElementById("group-right-btn");
      const startBtn = document.getElementById("group-start-btn");
      const endBtn = document.getElementById("group-end-btn");

      let playing = false;
      let correct = 0;
      let total = 0;
      let currentItem = null;
      let lastScore = null;

      function updateDisplay() {
        correctEl.textContent = correct;
        totalEl.textContent = total;
      }

      function newQuestion() {
        currentItem = items[Math.floor(Math.random() * items.length)];
        wordEl.textContent = currentItem.word;
        total++;
        updateDisplay();
      }

      function handleAnswer(side) {
        if (!playing) {
          msg.textContent = "ã¾ãšã¯ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
          return;
        }
        if (!currentItem) return;
        if (side === currentItem.cat) {
          correct++;
          msg.textContent = "æ­£è§£ï¼";
        } else {
          msg.textContent = "ãŠã—ã„â€¦ ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼";
        }
        lastScore = correct;
        newQuestion();
      }

      startBtn.addEventListener("click", () => {
        playing = true;
        correct = 0;
        total = 0;
        lastScore = null;
        msg.textContent = "ã“ã¨ã°ã‚’ã‚ˆãè¦‹ã¦é¸ã‚“ã§ã­ã€‚";
        updateDisplay();
        newQuestion();
      });

      leftBtn.addEventListener("click", () => handleAnswer("ç”Ÿãç‰©"));
      rightBtn.addEventListener("click", () => handleAnswer("é£Ÿã¹ç‰©"));

      endBtn.addEventListener("click", () => {
        playing = false;
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          wordEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          msg.textContent = "";
          correct = 0;
          total = 0;
          updateDisplay();
          return;
        }
        msg.textContent = `çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£æ•°ã¯ ${lastScore} å•ã§ã—ãŸã€‚`;
        askNameAndSave("group", lastScore, true);
        wordEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        correct = 0;
        total = 0;
        lastScore = null;
        updateDisplay();
      });
    })();

    // ===== æ•°å­—é€†é † =====
    (function setupReverse() {
      const levelEl = document.getElementById("reverse-level");
      const bestEl = document.getElementById("reverse-best");
      const seqEl = document.getElementById("reverse-seq");
      const answerInput = document.getElementById("reverse-answer");
      const startBtn = document.getElementById("reverse-start-btn");
      const submitBtn = document.getElementById("reverse-submit-btn");
      const endBtn = document.getElementById("reverse-end-btn");
      const msg = document.getElementById("reverse-message");

      let level = 1;
      let best = 0;
      let currentSeq = "";
      let playing = false;
      let lastScore = null;

      function updateDisplay() {
        levelEl.textContent = level;
        bestEl.textContent = best;
      }

      function makeSequence(len) {
        let s = "";
        for (let i = 0; i < len; i++) {
          s += String(Math.floor(Math.random() * 9) + 1);
        }
        return s;
      }

      function newRound() {
        currentSeq = makeSequence(level);
        seqEl.textContent = currentSeq.split("").join(" ");
        answerInput.value = "";
        answerInput.disabled = false;
        submitBtn.disabled = false;
        answerInput.focus();
      }

      function handleAnswer() {
        if (!playing) return;
        const ans = answerInput.value.trim();
        const correct = currentSeq.split("").reverse().join("");
        if (ans === correct) {
          msg.textContent = "æ­£è§£ï¼ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼";
          level++;
          if (level - 1 > best) best = level - 1;
          updateDisplay();
          newRound();
        } else {
          playing = false;
          lastScore = level - 1;
          if (lastScore > best) best = lastScore;
          updateDisplay();
          msg.textContent = `ã¾ã¡ãŒã„ã§ã™ã€‚æ­£è§£ã¯ ${correct}ã€‚åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${lastScore} ã§ã—ãŸã€‚æº€è¶³ã—ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã—ã¾ã—ã‚‡ã†ã€‚`;
          answerInput.disabled = true;
          submitBtn.disabled = true;
        }
      }

      startBtn.addEventListener("click", () => {
        playing = true;
        level = 1;
        lastScore = null;
        msg.textContent = "è¡¨ç¤ºã•ã‚ŒãŸæ•°å­—ã‚’é€†ã‹ã‚‰å…¥åŠ›ã—ã¦ã­ã€‚";
        updateDisplay();
        newRound();
      });

      submitBtn.addEventListener("click", handleAnswer);
      answerInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") handleAnswer();
      });

      endBtn.addEventListener("click", () => {
        if (playing) {
          playing = false;
          lastScore = level - 1;
          if (lastScore < 0) lastScore = 0;
          if (lastScore > best) best = lastScore;
          msg.textContent = `æ‰‹å‹•ã§çµ‚äº†ã—ã¾ã—ãŸã€‚åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${lastScore} ã§ã—ãŸã€‚`;
          answerInput.disabled = true;
          submitBtn.disabled = true;
          updateDisplay();
        }
        if (lastScore == null || lastScore <= 0) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          seqEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          msg.textContent = "";
          return;
        }
        askNameAndSave("reverse", lastScore, true);
        seqEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        level = 1;
        lastScore = null;
        answerInput.disabled = true;
        submitBtn.disabled = true;
        msg.textContent = "";
        updateDisplay();
      });

      updateDisplay();
    })();

    // ===== 1ã¤å‰ã‚²ãƒ¼ãƒ  (1-back) =====
    (function setupNBack() {
      const letterEl = document.getElementById("nback-letter");
      const correctEl = document.getElementById("nback-correct");
      const missEl = document.getElementById("nback-miss");
      const msg = document.getElementById("nback-message");
      const hitBtn = document.getElementById("nback-hit-btn");
      const startBtn = document.getElementById("nback-start-btn");
      const endBtn = document.getElementById("nback-end-btn");

      const letters = ["A", "B", "C", "D"];
      let seqTimer = null;
      let playing = false;
      let index = 0;
      let current = null;
      let prev = null;
      let correct = 0;
      let miss = 0;
      let lastScore = null;

      function updateDisplay() {
        correctEl.textContent = correct;
        missEl.textContent = miss;
      }

      function nextLetter() {
        if (!playing) return;
        prev = current;
        current = letters[Math.floor(Math.random() * letters.length)];
        letterEl.textContent = current;
        index++;
        if (index >= 20) {
          playing = false;
          if (seqTimer) clearInterval(seqTimer);
          seqTimer = null;
          msg.textContent = `ä¸€é€£ã®è¡¨ç¤ºãŒçµ‚ã‚ã‚Šã¾ã—ãŸã€‚æ­£è§£ ${correct} å›ã€ãƒŸã‚¹ ${miss} å›ã§ã™ã€‚æº€è¶³ã—ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚`;
          lastScore = correct;
        }
      }

      function handleHit() {
        if (!playing && lastScore == null) {
          msg.textContent = "ã¾ãšã¯ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
          return;
        }
        if (!current || !prev) return;
        if (!playing && lastScore != null) {
          return;
        }
        const isSame = current === prev;
        if (isSame) {
          correct++;
          msg.textContent = "æ­£è§£ï¼ã‚ˆãè¦šãˆã¦ã„ã¾ã—ãŸã€‚";
        } else {
          miss++;
          msg.textContent = "ãŠã—ã„â€¦ 1ã¤å‰ã¨åŒã˜ã¨ãã ã‘æŠ¼ãã†ã€‚";
        }
        updateDisplay();
      }

      startBtn.addEventListener("click", () => {
        if (seqTimer) clearInterval(seqTimer);
        playing = true;
        index = 0;
        current = null;
        prev = null;
        correct = 0;
        miss = 0;
        lastScore = null;
        updateDisplay();
        msg.textContent = "1ã¤å‰ã¨åŒã˜ã¨ãã ã‘ã€ŒåŒã˜ï¼ã€ã‚’æŠ¼ã—ã¦ã­ã€‚";
        nextLetter();
        seqTimer = setInterval(nextLetter, 2000);
      });

      hitBtn.addEventListener("click", handleHit);

      endBtn.addEventListener("click", () => {
        if (playing) {
          playing = false;
          if (seqTimer) clearInterval(seqTimer);
          seqTimer = null;
          lastScore = correct;
          msg.textContent = `æ‰‹å‹•ã§çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£ ${correct} å›ã€ãƒŸã‚¹ ${miss} å›ã§ã—ãŸã€‚`;
        }
        if (lastScore == null || lastScore < 0) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          letterEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          msg.textContent = "";
          correct = 0;
          miss = 0;
          updateDisplay();
          return;
        }
        askNameAndSave("nback", lastScore, true);
        letterEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        correct = 0;
        miss = 0;
        lastScore = null;
        updateDisplay();
        msg.textContent = "";
      });

      window.nbackForceStop = function () {
        if (seqTimer) clearInterval(seqTimer);
        seqTimer = null;
        playing = false;
        letterEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        msg.textContent = "";
        correct = 0;
        miss = 0;
        updateDisplay();
      };
    })();

    // ===== ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åˆè¨ˆ =====
    (function setupFlash() {
      const numberEl = document.getElementById("flash-number");
      const correctEl = document.getElementById("flash-correct");
      const roundEl = document.getElementById("flash-round");
      const msg = document.getElementById("flash-message");
      const answerInput = document.getElementById("flash-answer");
      const startBtn = document.getElementById("flash-start-btn");
      const submitBtn = document.getElementById("flash-submit-btn");
      const endBtn = document.getElementById("flash-end-btn");

      let playing = false;
      let showing = false;
      let sum = 0;
      let count = 0;
      let timer = null;
      let correct = 0;
      let round = 0;
      let lastScore = null;

      function updateDisplay() {
        correctEl.textContent = correct;
        roundEl.textContent = round;
      }

      function showSequence() {
        showing = true;
        sum = 0;
        count = 0;
        round++;
        updateDisplay();
        msg.textContent = "æ•°å­—ã‚’ã‚ˆãè¦‹ã¦ã€ã‚ã¨ã§åˆè¨ˆã‚’ç­”ãˆã¦ã­ã€‚";
        answerInput.value = "";
        answerInput.disabled = true;
        submitBtn.disabled = true;

        timer = setInterval(() => {
          if (count >= 7) {
            clearInterval(timer);
            timer = null;
            showing = false;
            numberEl.textContent = "?";
            answerInput.disabled = false;
            submitBtn.disabled = false;
            answerInput.focus();
            msg.textContent = "åˆè¨ˆã‚’å…¥åŠ›ã—ã¦ã€Œå›ç­”ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚";
            return;
          }
          const n = Math.floor(Math.random() * 9) + 1;
          sum += n;
          count++;
          numberEl.textContent = n;
        }, 700);
      }

      function handleAnswer() {
        if (!playing || showing) return;
        const val = parseInt(answerInput.value, 10);
        if (Number.isNaN(val)) {
          msg.textContent = "æ•°å­—ã§å…¥åŠ›ã—ã¦ã­ã€‚";
          return;
        }
        if (val === sum) {
          correct++;
          msg.textContent = "æ­£è§£ï¼æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã¸ã€‚";
        } else {
          msg.textContent = `ãŠã—ã„â€¦ æ­£è§£ã¯ ${sum} ã§ã—ãŸã€‚`;
        }
        lastScore = correct;
        updateDisplay();
        showSequence();
      }

      startBtn.addEventListener("click", () => {
        if (timer) clearInterval(timer);
        playing = true;
        correct = 0;
        round = 0;
        lastScore = null;
        updateDisplay();
        showSequence();
      });

      submitBtn.addEventListener("click", handleAnswer);
      answerInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") handleAnswer();
      });

      endBtn.addEventListener("click", () => {
        playing = false;
        if (timer) clearInterval(timer);
        timer = null;
        showing = false;
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          numberEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          msg.textContent = "";
          correct = 0;
          round = 0;
          updateDisplay();
          answerInput.disabled = true;
          submitBtn.disabled = true;
          return;
        }
        msg.textContent = `çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£ã¯ ${lastScore} å›ã§ã—ãŸã€‚`;
        askNameAndSave("flash", lastScore, true);
        numberEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        correct = 0;
        round = 0;
        lastScore = null;
        updateDisplay();
        answerInput.disabled = true;
        submitBtn.disabled = true;
      });

      window.flashForceStop = function () {
        if (timer) clearInterval(timer);
        timer = null;
        playing = false;
        showing = false;
        numberEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        msg.textContent = "";
        correct = 0;
        round = 0;
        updateDisplay();
      };

      updateDisplay();
    })();

    // ===== çŸ¢å°è¨˜æ†¶ =====
    (function setupArrows() {
      const arrows = ["â†‘", "â†’", "â†“", "â†"];
      const levelEl = document.getElementById("arrows-level");
      const bestEl = document.getElementById("arrows-best");
      const seqEl = document.getElementById("arrows-seq");
      const msg = document.getElementById("arrows-message");
      const startBtn = document.getElementById("arrows-start-btn");
      const endBtn = document.getElementById("arrows-end-btn");
      const arrowBtns = document.querySelectorAll("[data-arrow]");

      let level = 1;
      let best = 0;
      let sequence = [];
      let userIndex = 0;
      let showing = false;
      let playing = false;
      let timers = [];
      let lastScore = null;

      function updateDisplay() {
        levelEl.textContent = level;
        bestEl.textContent = best;
      }

      function clearTimers() {
        timers.forEach((t) => clearTimeout(t));
        timers = [];
      }

      function showSequence() {
        showing = true;
        seqEl.textContent = "";
        msg.textContent = "çŸ¢å°ã‚’ã‚ˆãè¦šãˆã¦ã­â€¦";
        clearTimers();
        sequence.forEach((arrow, i) => {
          const t = setTimeout(() => {
            seqEl.textContent = arrow;
          }, i * 700);
          timers.push(t);
        });
        const endT = setTimeout(() => {
          showing = false;
          seqEl.textContent = "ï¼Ÿ";
          msg.textContent = "åŒã˜é †ç•ªã§çŸ¢å°ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­ã€‚";
        }, sequence.length * 700 + 500);
        timers.push(endT);
      }

      function nextRound() {
        sequence.push(arrows[Math.floor(Math.random() * arrows.length)]);
        userIndex = 0;
        showSequence();
      }

      function gameOver() {
        playing = false;
        clearTimers();
        lastScore = level - 1;
        if (lastScore > best) best = lastScore;
        updateDisplay();
        msg.textContent = `ã¾ã¡ãŒã„ã§ã™ã€‚åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${lastScore} ã§ã—ãŸã€‚æº€è¶³ã—ãŸã‚‰ã€Œçµ‚äº†ãƒ»ãƒªã‚»ãƒƒãƒˆã€ã§ç™»éŒ²ã§ãã¾ã™ã€‚`;
      }

      function resetAll() {
        clearTimers();
        level = 1;
        sequence = [];
        userIndex = 0;
        showing = false;
        playing = false;
        lastScore = null;
        seqEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        msg.textContent = "";
        updateDisplay();
      }

      startBtn.addEventListener("click", () => {
        clearTimers();
        level = 1;
        sequence = [];
        userIndex = 0;
        showing = false;
        playing = true;
        lastScore = null;
        msg.textContent = "ã•ã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆï¼";
        updateDisplay();
        nextRound();
      });

      arrowBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          if (!playing || showing) return;
          const arrow = btn.getAttribute("data-arrow");
          const expected = sequence[userIndex];
          if (arrow === expected) {
            userIndex++;
            if (userIndex >= sequence.length) {
              level++;
              if (level - 1 > best) best = level - 1;
              updateDisplay();
              msg.textContent = "æ­£è§£ï¼æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¸ã€‚";
              setTimeout(nextRound, 800);
            }
          } else {
            gameOver();
          }
        });
      });

      endBtn.addEventListener("click", () => {
        if (playing) {
          playing = false;
          clearTimers();
          lastScore = level - 1;
          if (lastScore > best) best = lastScore;
          msg.textContent = `æ‰‹å‹•ã§çµ‚äº†ã—ã¾ã—ãŸã€‚åˆ°é”ãƒ¬ãƒ™ãƒ«ã¯ ${lastScore} ã§ã—ãŸã€‚`;
          updateDisplay();
        }
        if (lastScore == null || lastScore <= 0) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹ãƒ¬ãƒ™ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          resetAll();
          return;
        }
        askNameAndSave("arrows", lastScore, true);
        resetAll();
      });

      updateDisplay();
    })();

    // ===== ã“ã¨ã°ä¸¦ã¹æ›¿ãˆ =====
    (function setupWords() {
      const words = ["ã•ãã‚‰", "ã‚„ã¾", "ã‹ã‚", "ã»ã—", "ãã‚‹ã¾", "ã­ã“", "ã„ã¬", "ã™ã„ã‹", "ã”ã¯ã‚“", "ã‚ã‚"];
      const scrambledEl = document.getElementById("words-scrambled");
      const correctEl = document.getElementById("words-correct");
      const totalEl = document.getElementById("words-total");
      const msg = document.getElementById("words-message");
      const answerInput = document.getElementById("words-answer");
      const startBtn = document.getElementById("words-start-btn");
      const submitBtn = document.getElementById("words-submit-btn");
      const endBtn = document.getElementById("words-end-btn");

      let playing = false;
      let currentWord = "";
      let correct = 0;
      let total = 0;
      let lastScore = null;

      function updateDisplay() {
        correctEl.textContent = correct;
        totalEl.textContent = total;
      }

      function shuffleString(str) {
        const arr = [...str];
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr.join("");
      }

      function newQuestion() {
        currentWord = words[Math.floor(Math.random() * words.length)];
        let s = shuffleString(currentWord);
        if (s === currentWord) s = shuffleString(currentWord);
        scrambledEl.textContent = s;
        total++;
        updateDisplay();
        answerInput.disabled = false;
        submitBtn.disabled = false;
        answerInput.value = "";
        answerInput.focus();
      }

      function handleAnswer() {
        if (!playing) return;
        const ans = answerInput.value.trim();
        if (!ans) return;
        if (ans === currentWord) {
          correct++;
          msg.textContent = "æ­£è§£ï¼";
        } else {
          msg.textContent = `ãŠã—ã„â€¦ æ­£è§£ã¯ã€Œ${currentWord}ã€ã§ã—ãŸã€‚`;
        }
        lastScore = correct;
        updateDisplay();
        newQuestion();
      }

      startBtn.addEventListener("click", () => {
        playing = true;
        correct = 0;
        total = 0;
        lastScore = null;
        msg.textContent = "ãƒãƒ©ãƒãƒ©ã®ã²ã‚‰ãŒãªã‚’æ­£ã—ã„ã“ã¨ã°ã«ã—ã¦ã­ã€‚";
        updateDisplay();
        newQuestion();
      });

      submitBtn.addEventListener("click", handleAnswer);
      answerInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") handleAnswer();
      });

      endBtn.addEventListener("click", () => {
        playing = false;
        answerInput.disabled = true;
        submitBtn.disabled = true;
        if (lastScore == null) {
          alert("ã¾ã ç™»éŒ²ã§ãã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ãƒ—ãƒ¬ã‚¤ã—ã¦ã¿ã‚ˆã†ï¼");
          scrambledEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
          msg.textContent = "";
          correct = 0;
          total = 0;
          updateDisplay();
          return;
        }
        msg.textContent = `çµ‚äº†ã—ã¾ã—ãŸã€‚æ­£è§£æ•°ã¯ ${lastScore} å•ã§ã—ãŸã€‚`;
        askNameAndSave("words", lastScore, true);
        scrambledEl.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆã‚’æŠ¼ã—ã¦ã­";
        correct = 0;
        total = 0;
        lastScore = null;
        updateDisplay();
      });

      updateDisplay();
    })();

    // åˆæœŸåŒ–ï¼šãƒ©ãƒ³ã‚­ãƒ³ã‚°èª­ã¿è¾¼ã¿ï¼†æç”»
    loadRankings();
    const allGames = [
      "reaction", "calc", "memory", "stroop", "tap25",
      "group", "reverse", "nback", "flash", "arrows", "words"
    ];
    allGames.forEach(renderRanking);
  </script>
</body>
</html>
